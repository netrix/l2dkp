(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{7083:function(e,n,t){Promise.resolve().then(t.bind(t,3922))},3922:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var r=t(9268),i=t(6006),o=t(1771),l=t(4240),s=t(7931),a=t(1301),d=t(1387),c=t(3658),h=t(4274),x=t(8399),u=t(8992),j=t(6564),p=t(5991),Z=t(5287),g=t(1947),m=t(9714),f=t(4495),v=t(3210),C=t(8350),b=t(383),y=t(8843);function k(e){let{raidInfo:n}=e,[t,s]=i.useState(!1);return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(j.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,r.jsx)(h.Z,{component:"th",scope:"row",children:n.date}),(0,r.jsx)(h.Z,{align:"left",children:n.name}),(0,r.jsx)(h.Z,{align:"right",children:n.drops.length}),(0,r.jsx)(h.Z,{align:"right",children:n.people.length}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(m.Z,{"aria-label":"expand row",size:"small",onClick:()=>s(!t),children:t?(0,r.jsx)(y.Z,{}):(0,r.jsx)(b.Z,{})})})]}),(0,r.jsx)(j.Z,{children:(0,r.jsx)(h.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,r.jsx)(f.Z,{in:t,timeout:"auto",unmountOnExit:!0,children:(0,r.jsxs)(o.Z,{sx:{margin:1},children:[(0,r.jsx)(l.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"Drops"}),(0,r.jsx)(v.Z,{children:n.drops.map(e=>(0,r.jsx)(C.ZP,{children:e},e))}),(0,r.jsx)(l.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"People"}),(0,r.jsx)(v.Z,{children:n.people.map(e=>(0,r.jsx)(C.ZP,{children:e},e))})]})})})})]})}var B=t(4827),w=t(3984),A=t(2945),P=t(3805),S=t(9822),E=t(6588),O=t(3964),R=t(6902),_=t.n(R);function F(e){let{value:n,onChange:t}=e;return(0,r.jsx)(A._,{dateAdapter:w.y,children:(0,r.jsx)(P.M,{label:"Raid date",value:n,onChange:t})})}function N(e){let{initName:n,forbiddenNames:t,onConfirm:o,onCancel:l}=e,[a,d]=i.useState(n),[c,h]=i.useState(!1);function x(){a&&!c&&o(a)}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{autoFocus:!0,defaultValue:n,error:c,onChange:e=>{let n=e.target.value;d(n),h(t.includes(n))},onKeyPress:e=>{"Enter"===e.key&&x()}}),(0,r.jsx)(s.Z,{variant:"contained",onClick:x,children:(0,r.jsx)(E.Z,{})}),(0,r.jsx)(s.Z,{variant:"contained",color:"error",onClick:()=>{l()},children:(0,r.jsx)(O.Z,{})})]})}function D(e){let{names:n,onChange:t}=e,[o,l]=i.useState(!1);return(0,r.jsxs)(v.Z,{children:[n.map(e=>(0,r.jsx)(C.ZP,{children:e},e)),o?(0,r.jsx)(C.ZP,{children:(0,r.jsx)(N,{initName:"",forbiddenNames:n,onConfirm:e=>{t(n.concat(e)),l(!1)},onCancel:()=>l(!1)})}):(0,r.jsx)(C.ZP,{children:(0,r.jsx)(s.Z,{variant:"contained",color:"primary",startIcon:(0,r.jsx)(a.Z,{}),onClick:()=>{l(!0)},children:"Add"})})]})}function q(e){var n;let[t,a]=i.useState((n=e.raidInfo,{date:_()(null==n?void 0:n.date),name:(null==n?void 0:n.date)||"",drops:(null==n?void 0:n.drops)||[],people:(null==n?void 0:n.people)||[]}));return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(j.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,r.jsx)(h.Z,{component:"th",scope:"row",align:"left",children:(0,r.jsx)(F,{value:t.date,onChange:e=>{a({...t,date:e})}})}),(0,r.jsx)(h.Z,{align:"left",children:(0,r.jsx)(S.Z,{id:"outlined-basic",label:"Raid name",variant:"outlined",onChange:e=>{a({...t,name:e.target.value})}})}),(0,r.jsx)(h.Z,{align:"right",children:t.drops.length}),(0,r.jsx)(h.Z,{align:"right",children:t.people.length})]}),(0,r.jsx)(j.Z,{children:(0,r.jsxs)(h.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:[(0,r.jsxs)(o.Z,{sx:{margin:1},children:[(0,r.jsx)(l.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"Drops"}),(0,r.jsx)(D,{names:t.drops,onChange:e=>{a({...t,drops:e})}}),(0,r.jsx)(l.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"People"}),(0,r.jsx)(D,{names:t.people,onChange:e=>{a({...t,people:e})}})]}),(0,r.jsxs)(o.Z,{sx:{margin:"16px",display:"flex",justifyContent:"right"},children:[(0,r.jsx)(s.Z,{variant:"contained",color:"error",onClick:()=>e.onCancel(),children:"Cancel"}),(0,r.jsx)(s.Z,{variant:"contained",color:"primary",onClick:()=>{e.onAccept({date:t.date.format(),name:t.name,drops:t.drops,people:t.people})},children:"Add"})]})]})})]})}let I=(0,Z.Z)({components:{MuiTableCell:{styleOverrides:{root:{fontWeight:"bold"}}}}});function M(e){let{showAddButton:n,onAddButtonClick:t}=e;return(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:2},children:[(0,r.jsx)(l.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"Raids"}),n&&(0,r.jsx)(s.Z,{variant:"contained",color:"primary",startIcon:(0,r.jsx)(a.Z,{}),onClick:t,children:"Add"})]})}function T(){return(0,r.jsx)(g.Z,{theme:I,children:(0,r.jsx)(u.Z,{children:(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(h.Z,{align:"left",children:"Date"}),(0,r.jsx)(h.Z,{children:"Raid name"}),(0,r.jsx)(h.Z,{align:"right",children:"Drops"}),(0,r.jsx)(h.Z,{align:"right",children:"People"}),(0,r.jsx)(h.Z,{})]})})})}function L(e){let{raids:n,isAddMode:t,onRaidEditAccept:i,onRaidEditCancel:o}=e;return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(q,{onAccept:i,onCancel:o}),n.map(e=>(0,r.jsx)(k,{raidInfo:e},e.name))]})}function z(e){let{message:n}=e;return(0,r.jsx)(j.Z,{sx:{"& > *":{borderBottom:"unset"}},children:(0,r.jsx)(h.Z,{scope:"row",align:"left",children:(0,r.jsxs)("p",{children:["Oh no, there was an error ",n]})})})}function J(){return(0,r.jsx)(j.Z,{sx:{"& > *":{borderBottom:"unset"}},children:(0,r.jsx)(h.Z,{scope:"row",align:"left",children:(0,r.jsx)("p",{children:"Loading..."})})})}function K(){let[e,n]=i.useState(!1),{isLoading:t,isFetching:o,data:l,error:s}=(0,B.q)(null);return(0,r.jsxs)(p.Z,{elevation:1,sx:{width:"60%"},children:[(0,r.jsx)(M,{showAddButton:!e&&!t&&!t&&!s,onAddButtonClick:()=>n(!0)}),(0,r.jsx)(x.Z,{component:p.Z,children:(0,r.jsxs)(d.Z,{"aria-label":"collapsible table",children:[(0,r.jsx)(T,{}),(0,r.jsx)(c.Z,{children:s?(0,r.jsx)(z,{message:JSON.stringify(s)}):t||o?(0,r.jsx)(J,{}):l?(0,r.jsx)(L,{raids:l,isAddMode:e,onRaidEditAccept:e=>{console.log(e),n(!1)},onRaidEditCancel:()=>n(!1)}):null})]})})]})}},4827:function(e,n,t){"use strict";t.d(n,{d:function(){return o},q:function(){return l}});var r=t(9764),i=t(1452);let o=(0,r.LC)({reducerPath:"raidsApi",refetchOnFocus:!0,baseQuery:(0,i.ni)({baseUrl:"/api"}),endpoints:e=>({getRaids:e.query({query:()=>"raids"})})}),{useGetRaidsQuery:l}=o}},function(e){e.O(0,[216,58,764,170,667,139,744],function(){return e(e.s=7083)}),_N_E=e.O()}]);